<?xml version='1.0' encoding='ASCII'?>
<proto:protocol xmlns:oxmeta="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#" xmlns:cellml="http://www.cellml.org/cellml/1.0#" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:proto="https://chaste.cs.ox.ac.uk/nss/protocol/0.1#" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:1:1&#9;# Compact syntax version of the test_onestep_sim protocol">
  <proto:import source="../../../src/proto/library/BasicLibrary.xml" mergeDefinitions="true" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:6:1&#9;import &quot;../../../src/proto/library/BasicLibrary.xml&quot;"/>
  <proto:units proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:8:1&#9;units {">
    <cellml:units name="ms" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:9:5&#9;    ms = milli second">
      <cellml:unit units="second" prefix="milli" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:9:10&#9;    ms = milli second"/>
    </cellml:units>
    <cellml:units name="mV" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:10:5&#9;    mV = milli volt">
      <cellml:unit units="volt" prefix="milli" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:10:10&#9;    mV = milli volt"/>
    </cellml:units>
    <cellml:units name="mV_per_ms" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:11:5&#9;    mV_per_ms = milli volt . milli second^-1">
      <cellml:unit units="volt" prefix="milli" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:11:17&#9;    mV_per_ms = milli volt . milli second^-1"/>
      <cellml:unit units="second" prefix="milli" exponent="-1" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:11:30&#9;    mV_per_ms = milli volt . milli second^-1"/>
    </cellml:units>
  </proto:units>
  <proto:modelInterface proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:15:1&#9;model interface {">
    <proto:setIndependentVariableUnits units="ms" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:16:5&#9;    independent var units ms"/>
    <proto:specifyInputVariable name="oxmeta:membrane_voltage" initial_value="0.0" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:17:5&#9;    input oxmeta:membrane_voltage = 0.0"/>
    <proto:specifyOutputVariable units="mV" name="oxmeta:membrane_voltage" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:18:5&#9;    output oxmeta:membrane_voltage units mV"/>
    <proto:addOrReplaceEquation proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:19:5&#9;    define diff(oxmeta:membrane_voltage; oxmeta:time) = 1">
      <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:19:5&#9;    define diff(oxmeta:membrane_voltage; oxmeta:time) = 1">
        <m:eq/>
        <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:19:5&#9;    define diff(oxmeta:membrane_voltage; oxmeta:time) = 1">
          <m:diff/>
          <m:bvar>
            <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:19:42&#9;    define diff(oxmeta:membrane_voltage; oxmeta:time) = 1">oxmeta:time</m:ci>
          </m:bvar>
          <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:19:17&#9;    define diff(oxmeta:membrane_voltage; oxmeta:time) = 1">oxmeta:membrane_voltage</m:ci>
        </m:apply>
        <m:cn proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:19:57&#9;    define diff(oxmeta:membrane_voltage; oxmeta:time) = 1">1</m:cn>
      </m:apply>
    </proto:addOrReplaceEquation>
  </proto:modelInterface>
  <proto:simulations proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:22:1&#9;tasks {">
    <proto:nestedSimulation proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:25:5&#9;    simulation nested = nested {" prefix="nested">
      <proto:uniformStepper units="ms" name="t" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:26:9&#9;        range t units ms uniform 0:9">
        <proto:start>
          <m:cn proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:26:34&#9;        range t units ms uniform 0:9">0</m:cn>
        </proto:start>
        <proto:stop>
          <m:cn proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:26:36&#9;        range t units ms uniform 0:9">9</m:cn>
        </proto:stop>
        <proto:step>
          <m:cn proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:26:9&#9;        range t units ms uniform 0:9">1</m:cn>
        </proto:step>
      </proto:uniformStepper>
      <proto:modifiers proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:27:9&#9;        modifiers { at each loop set oxmeta:time = t }">
        <proto:setVariable proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:27:21&#9;        modifiers { at each loop set oxmeta:time = t }">
          <proto:when proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:27:23&#9;        modifiers { at each loop set oxmeta:time = t }">EVERY_LOOP</proto:when>
          <proto:name>oxmeta:time</proto:name>
          <proto:value>
            <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:27:52&#9;        modifiers { at each loop set oxmeta:time = t }">t</m:ci>
          </proto:value>
        </proto:setVariable>
      </proto:modifiers>
      <proto:oneStep step="1.0" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:28:15&#9;        nests simulation oneStep 1.0"/>
    </proto:nestedSimulation>
    <proto:timecourseSimulation proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:31:5&#9;    simulation timecourse = timecourse {" prefix="timecourse">
      <proto:uniformStepper units="ms" name="t" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:32:9&#9;        range t units ms uniform 0:10">
        <proto:start>
          <m:cn proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:32:34&#9;        range t units ms uniform 0:10">0</m:cn>
        </proto:start>
        <proto:stop>
          <m:cn proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:32:36&#9;        range t units ms uniform 0:10">10</m:cn>
        </proto:stop>
        <proto:step>
          <m:cn proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:32:9&#9;        range t units ms uniform 0:10">1</m:cn>
        </proto:step>
      </proto:uniformStepper>
      <proto:modifiers proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:33:9&#9;        modifiers { at start reset } # Since otherwise we'd start where nested stopped">
        <proto:resetState proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:33:21&#9;        modifiers { at start reset } # Since otherwise we'd start where nested stopped">
          <proto:when proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:33:23&#9;        modifiers { at start reset } # Since otherwise we'd start where nested stopped">AT_START_ONLY</proto:when>
        </proto:resetState>
      </proto:modifiers>
    </proto:timecourseSimulation>
  </proto:simulations>
  <proto:post-processing proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:37:1&#9;post-processing {">
    <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:37:1&#9;post-processing {">
      <m:csymbol definitionURL="https://chaste.cs.ox.ac.uk/nss/protocol/statementList" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:37:1&#9;post-processing {"/>
      <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:39:5&#9;    assert nested:membrane_voltage.IS_ARRAY">
        <m:csymbol definitionURL="https://chaste.cs.ox.ac.uk/nss/protocol/assert" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:39:5&#9;    assert nested:membrane_voltage.IS_ARRAY"/>
        <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:39:12&#9;    assert nested:membrane_voltage.IS_ARRAY">
          <m:csymbol definitionURL="https://chaste.cs.ox.ac.uk/nss/protocol/accessor" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:39:12&#9;    assert nested:membrane_voltage.IS_ARRAY">IS_ARRAY</m:csymbol>
          <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:39:12&#9;    assert nested:membrane_voltage.IS_ARRAY">nested:membrane_voltage</m:ci>
        </m:apply>
      </m:apply>
      <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:40:5&#9;    assert timecourse:membrane_voltage.IS_ARRAY">
        <m:csymbol definitionURL="https://chaste.cs.ox.ac.uk/nss/protocol/assert" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:40:5&#9;    assert timecourse:membrane_voltage.IS_ARRAY"/>
        <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:40:12&#9;    assert timecourse:membrane_voltage.IS_ARRAY">
          <m:csymbol definitionURL="https://chaste.cs.ox.ac.uk/nss/protocol/accessor" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:40:12&#9;    assert timecourse:membrane_voltage.IS_ARRAY">IS_ARRAY</m:csymbol>
          <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:40:12&#9;    assert timecourse:membrane_voltage.IS_ARRAY">timecourse:membrane_voltage</m:ci>
        </m:apply>
      </m:apply>
      <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:5&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">
        <m:csymbol definitionURL="https://chaste.cs.ox.ac.uk/nss/protocol/assert" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:5&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)"/>
        <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:12&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">
          <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:12&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">std:ArrayEq</m:ci>
          <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:24&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">
            <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:24&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">std:Join</m:ci>
            <m:apply proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:33&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">
              <m:csymbol definitionURL="https://chaste.cs.ox.ac.uk/nss/protocol/newArray"/>
              <m:cn proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:34&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">0</m:cn>
            </m:apply>
            <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:38&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">nested:membrane_voltage</m:ci>
          </m:apply>
          <m:ci proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:43:64&#9;    assert std:ArrayEq(std:Join([0], nested:membrane_voltage), timecourse:membrane_voltage)">timecourse:membrane_voltage</m:ci>
        </m:apply>
      </m:apply>
    </m:apply>
  </proto:post-processing>
  <proto:outputs proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:46:1&#9;outputs {">
    <proto:raw ref="nested:membrane_voltage" name="V_nested" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:47:5&#9;    V_nested = nested:membrane_voltage"/>
    <proto:raw ref="timecourse:membrane_voltage" name="V_timecourse" proto:loc="projects/FunctionalCuration/test/protocols/compact/test_onestep_sim.txt:48:5&#9;    V_timecourse = timecourse:membrane_voltage"/>
  </proto:outputs>
</proto:protocol>
